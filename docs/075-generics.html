<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#" data-bs-theme="auto">

<head>
    <title>Ultimate .NET cheat sheet - Generics</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" sizes="180x180" href="pwa/apple-touch-icon.png">
    <link rel="manifest" href="manifest.json">
    <link href="bootstrap.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="prism.css" type="text/css">
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="prism.js" type="text/javascript"></script>
    <script src="script.js" type="text/javascript"></script>

    <!--OpenGraph meta-->
    <meta property="og:url" content="https://webmaster442.github.io/ultimatedotnetcheatsheet/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Ultimate .NET cheat sheet - Generics">
    <meta property="og:locale" content="en_US">
    <meta property="og:image" content="https://webmaster442.github.io/ultimatedotnetcheatsheet/header.webp">
    <meta property="og:image:type" content="image/webp" />
    <meta property="og:image:width" content="945" />
    <meta property="og:image:height" content="1134" />
    <meta property="og:description"
        content="Welcome to the Ultimate .NET Cheatsheet! This project aims to provide a comprehensive and useful guide for developers working with C# on a daily basis. Whether you're a beginner getting started with C# or an experienced developer looking for quick references, this cheatsheet has got you covered.">
</head>

<body>
    <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
        <symbol id="check2" viewBox="0 0 16 16">
            <path
                d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z" />
        </symbol>
        <symbol id="circle-half" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z" />
        </symbol>
        <symbol id="moon-stars-fill" viewBox="0 0 16 16">
            <path
                d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z" />
            <path
                d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z" />
        </symbol>
        <symbol id="sun-fill" viewBox="0 0 16 16">
            <path
                d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z" />
        </symbol>
    </svg>


    <div style="display: flex;">
        <aside id="nav" class="text-white bg-dark">
            <div>
                <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                    <img src="pwa/i-192.png" height="40px" style="margin: 7px;"> Version: 24-09-26
                </a>
            </div>
            <hr>
            <div id="toclinks">
                <ul><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/010-basiccommands.html">Dotnet CLI</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/020-project.html">Project XML Settings</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/030-powershell.html">Usefull Powershell commands & scripts</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/035-csharpbasics.html">C# basics</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/040-types.html">Basic type system</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/045-type-interfaces.html">Important interfaces for types</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/060-strings.html">Strings</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/070-exceptions.html">Exceptions</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/075-generics.html">Generics</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/080-collections.html">Collections</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/090-linq.html">LINQ</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/100-paternmatch.html">Pattern matching</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/105-tasks.html">Tasks</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/110-io.html">I/O</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/111-attribs.html">Attributes</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/112-serialization.html">Serialization</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/114-validation.html">Object validation</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/120-crypto.html">Cryptography</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/130-reflection.html">Reflection</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/140-ui.html">UI</a></li><li><a href="https://webmaster442.github.io/ultimatedotnetcheatsheet/150-nuget.html">Useful NuGet packages</a></li></ul>
            </div>
            <hr>
            <div id="icons">
                <a class="btn btn-link" href="https://github.com/webmaster442/ultimatedotnetcheatsheet/issues"
                    title="Report a bug/Request a feature..." target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <title>Report a bug/Request a feature...</title>
                        <path
                            d="M14,12H10V10H14M14,16H10V14H14M20,8H17.19C16.74,7.22 16.12,6.55 15.37,6.04L17,4.41L15.59,3L13.42,5.17C12.96,5.06 12.5,5 12,5C11.5,5 11.04,5.06 10.59,5.17L8.41,3L7,4.41L8.62,6.04C7.88,6.55 7.26,7.22 6.81,8H4V10H6.09C6.04,10.33 6,10.66 6,11V12H4V14H6V15C6,15.34 6.04,15.67 6.09,16H4V18H6.81C7.85,19.79 9.78,21 12,21C14.22,21 16.15,19.79 17.19,18H20V16H17.91C17.96,15.67 18,15.34 18,15V14H20V12H18V11C18,10.66 17.96,10.33 17.91,10H20V8Z" />
                    </svg>
                </a>
                <a class="btn btn-link" href="https://github.com/webmaster442/ultimatedotnetcheatsheet" target="_blank"
                    title="Fork me on github">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <title>Fork me on github</title>
                        <path
                            d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" />
                    </svg>
                </a>
            </div>
        </aside>
    </div>

    <div id="main">
        <div class="container">
            <div class="row" style="margin: 0px auto;">
                <div class="col-lg-10" id="content">
                    <h1 id="generics">Generics</h1>
<p>Generics in C# allow you to define classes, methods, interfaces, and delegates with type parameters, enabling type safety and code reuse without compromising performance.</p>
<p>Type parameters can be defined for types and methods using angle brackets (<code>&lt;&gt;</code>).</p>
<h2 id="constraints">Constraints</h2>
<p>Generic constraints in C# provide a way to restrict the types that can be used as arguments for a generic type parameter. Without constraints, generic type parameters can be any type (class, struct, enum, etc.). However, sometimes you want to limit the generic type to certain kinds of types (e.g., reference types, value types, types that implement a specific interface, etc.). Constraints are declared using the <code>where</code> clause in the generic type or method declaration.</p>
<h3 id="no-constraints">No Constraints</h3>
<p>If you don't specify any constraints, the type parameter can be any type.</p>
<pre><code class="language-csharp">public class GenericClass&lt;T&gt;
{
    public T Value { get; set; }
}
</code></pre>
<h3 id="value-type">Value Type</h3>
<pre><code class="language-csharp">public class ValueTypeOnly&lt;T&gt; where T : struct
{
    public T Value { get; set; }
}
</code></pre>
<h3 id="reference-type">Reference Type</h3>
<pre><code class="language-csharp">public class ReferenceTypeOnly&lt;T&gt; where T : class
{
    public T Value { get; set; }
}
</code></pre>
<h3 id="parameterless-constructor">Parameterless Constructor</h3>
<p>The <code>new()</code> constraint ensures that the type <code>T</code> has a parameterless constructor. This is useful when you need to create instances of the type within the generic class or method.</p>
<pre><code class="language-csharp">public class InstantiateType&lt;T&gt; where T : new()
{
    public T CreateInstance()
    {
        return new T(); // Requires T to have a parameterless constructor
    }
}
</code></pre>
<h3 id="base-class-or-implemented-interface">Base Class or Implemented interface</h3>
<pre><code class="language-csharp">public class BaseClass { }
public class DerivedClass : BaseClass { }

public class DerivedTypeOnly&lt;T&gt; where T : BaseClass
{
    public T Value { get; set; }
}
</code></pre>
<h3 id="multiple-constraints">Multiple Constraints</h3>
<pre><code class="language-csharp">public class MultiConstraint&lt;T&gt; where T : class, new()
{
    public T CreateInstance()
    {
        return new T(); // T must be a reference type and have a parameterless constructor
    }
}
</code></pre>
<h3 id="enum">Enum</h3>
<pre><code class="language-csharp">public class EnumConstraint&lt;T&gt; where T : struct, Enum
{
    public void PrintEnumValues()
    {
        foreach (var value in Enum.GetValues(typeof(T)))
        {
            Console.WriteLine(value);
        }
    }
}
</code></pre>
<h3 id="delegate">Delegate</h3>
<pre><code class="language-csharp">public class DelegateConstraint&lt;T&gt; where T : Delegate
{
    public void InvokeDelegate(T del)
    {
        del.DynamicInvoke(); // Invoke delegate dynamically
    }
}
</code></pre>
<h3 id="notnull">notnull</h3>
<p>The <code>notnull</code> constraint restricts the generic type parameter <code>T</code> to types that are not nullable, meaning:</p>
<ul>
<li>It can be any value type</li>
<li>It can be any non-nullable reference type</li>
<li>It cannot be nullable types like int? (nullable value type) or string? (nullable reference type in C# 8.0 with nullable reference types enabled).</li>
</ul>
<pre><code class="language-csharp">public class NotNullConstraint&lt;T&gt; where T : notnull
{
    public T Value { get; set; }

    public NotNullConstraint(T value)
    {
        Value = value ?? throw new ArgumentNullException(nameof(value), &quot;Value cannot be null&quot;);
    }
}

// Allowed: Non-nullable reference type (string)
NotNullConstraint&lt;string&gt; stringConstraint = new NotNullConstraint&lt;string&gt;(&quot;Hello&quot;);

// Allowed: Non-nullable reference type (string)
NotNullConstraint&lt;string&gt; stringConstraint = new NotNullConstraint&lt;string&gt;(&quot;Hello&quot;);

// Not allowed: Nullable reference type (string?) in C# 8.0Å±
// compile error
NotNullConstraint&lt;string?&gt; nullableStringConstraint = new NotNullConstraint&lt;string?&gt;(null);

// Not allowed: Nullable value type (int?)
// compile error
NotNullConstraint&lt;int?&gt; nullableValueConstraint = new NotNullConstraint&lt;int?&gt;(null);
</code></pre>
<h2 id="covariance">Covariance</h2>
<p>Covariance allows you to use a more derived type than originally specified. In C#, covariance applies to generic type parameters in interfaces and delegates when used for output (return types). You declare a type parameter as covariant using the <code>out</code> keyword.</p>
<pre><code class="language-csharp">public interface ICovariant&lt;out T&gt;
{
    T GetItem();
}
</code></pre>
<p>Here, <code>T</code> is covariant because it is marked with the <code>out</code> keyword, and it can only be used as a return type. The <code>out</code> keyword means that if <code>Dog</code> inherits from <code>Animal</code>, then <code>ICovariant&lt;Dog&gt;</code> can be treated as <code>ICovariant&lt;Animal&gt;</code>:</p>
<pre><code class="language-csharp">ICovariant&lt;Animal&gt; animals = new CovariantImplementation&lt;Dog&gt;();
Animal animal = animals.GetItem();
</code></pre>
<h2 id="contravariance">Contravariance</h2>
<p>Contravariance allows you to use a more general (or base) type than originally specified. In C#, contravariance applies to generic type parameters in interfaces and delegates when used for input (method parameters). You declare a type parameter as contravariant using the <code>in</code> keyword.</p>
<pre><code class="language-csharp">public interface IContravariant&lt;in T&gt;
{
    void SetItem(T item);
}
</code></pre>
<p>Here, <code>T</code> is contravariant because it is marked with the in keyword, and it can only be used as a method parameter. The <code>in</code> keyword means that if <code>Dog</code> inherits from <code>Animal</code>, then <code>IContravariant&lt;Animal&gt;</code> can be treated as <code>IContravariant&lt;Dog&gt;</code>.</p>
<pre><code class="language-csharp">IContravariant&lt;Dog&gt; dogs = new ContravariantImplementation&lt;Animal&gt;();
dogs.SetItem(new Dog());
</code></pre>
<h2 id="invariance">Invariance</h2>
<p>Invariance means that there is no relationship between <code>GenericType&lt;Derived&gt;</code> and <code>GenericType&lt;Base&gt;</code>, even if <code>Derived</code> inherits from <code>Base</code>. Most generic types in C# are invariant by default. This means that <code>List&lt;Dog&gt;</code> is not considered a subtype of <code>List&lt;Animal&gt;</code>, even though <code>Dog</code> is a subtype of <code>Animal</code>.</p>
<pre><code class="language-csharp">//the following causes a compile error
List&lt;Animal&gt; animals = new List&lt;Dog&gt;();
</code></pre>

                </div>
                <div class="col-lg-2">
                    <div class="card" id="pagenav">
                        <h4 class="card-title">On this page</h4>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
        <button class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button"
            aria-expanded="false" data-bs-toggle="dropdown" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active" width="1em" height="1em">
                <use href="#circle-half"></use>
            </svg>
            <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text">
            <li>
                <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light"
                    aria-pressed="false">
                    <svg class="bi me-2 opacity-50" width="1em" height="1em">
                        <use href="#sun-fill"></use>
                    </svg>
                    Light
                    <svg class="bi ms-auto d-none" width="1em" height="1em">
                        <use href="#check2"></use>
                    </svg>
                </button>
            </li>
            <li>
                <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark"
                    aria-pressed="false">
                    <svg class="bi me-2 opacity-50" width="1em" height="1em">
                        <use href="#moon-stars-fill"></use>
                    </svg>
                    Dark
                    <svg class="bi ms-auto d-none" width="1em" height="1em">
                        <use href="#check2"></use>
                    </svg>
                </button>
            </li>
            <li>
                <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto"
                    aria-pressed="true">
                    <svg class="bi me-2 opacity-50" width="1em" height="1em">
                        <use href="#circle-half"></use>
                    </svg>
                    Auto
                    <svg class="bi ms-auto d-none" width="1em" height="1em">
                        <use href="#check2"></use>
                    </svg>
                </button>
            </li>
        </ul>
    </div>

    <button id="navigate-top" onclick="scrollToTop()" type="button" title="Scroll to top">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" />
        </svg>
    </button>

    <script src="bootstrap.bundle.min.js" type="text/javascript"></script>

</body>

</html>
